Index: gnome-control-center-2.30.1/capplets/accessibility/at-properties/at-enable-dialog.ui
===================================================================
--- gnome-control-center-2.30.1.orig/capplets/accessibility/at-properties/at-enable-dialog.ui	2010-08-20 20:10:39.451730011 -0400
+++ gnome-control-center-2.30.1/capplets/accessibility/at-properties/at-enable-dialog.ui	2010-08-20 20:14:55.139510013 -0400
@@ -120,6 +120,28 @@
                                 <property name="position">2</property>
                               </packing>
                             </child>
+                            <child>
+                              <object class="GtkCheckButton" id="at_visual_bell_toggle">
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="label" translatable="yes">Enable _visual system bell</property>
+                                <property name="use_underline">True</property>
+                                <property name="draw_indicator">True</property>
+                                <accessibility>
+                                  
+                                </accessibility>
+                                <child internal-child="accessible">
+                                  <object class="AtkObject" id="a11y-at_visual_bell_toggle1">
+                                    <property name="AtkObject::accessible_description" translatable="yes">Changes to visual system bell take effect immediately.</property>
+                                  </object>
+                                </child>
+                              </object>
+                              <packing>
+                                <property name="expand">False</property>
+                                <property name="fill">False</property>
+                                <property name="position">3</property>
+                              </packing>
+                            </child>
                           </object>
                           <packing>
                             <property name="position">1</property>
Index: gnome-control-center-2.30.1/capplets/accessibility/at-properties/main.c
===================================================================
--- gnome-control-center-2.30.1.orig/capplets/accessibility/at-properties/main.c	2010-08-20 20:15:08.126000011 -0400
+++ gnome-control-center-2.30.1/capplets/accessibility/at-properties/main.c	2010-08-20 20:28:08.716100014 -0400
@@ -23,6 +23,8 @@
 #define ACCESSIBILITY_KEY_DIR   "/desktop/gnome/interface"
 #define GKSU_NO_GRAB_KEY        "/apps/gksu/disable-grab"
 #define GKSU_NO_GRAB_KEY_DIR    "/apps/gksu"
+#define VISUAL_BELL_KEY         "/apps/metacity/general/visual_bell"
+#define VISUAL_BELL_KEY_DIR     "/apps/metacity/general"
 
 static gboolean initial_state;
 
@@ -248,6 +250,41 @@
        g_object_unref (client);
 }
 
+static void
+at_visual_bell_update  (GConfClient *client,
+                        GtkBuilder  *builder)
+{
+       gboolean is_enabled = gconf_client_get_bool (client, VISUAL_BELL_KEY, NULL);
+       GObject *button = gtk_builder_get_object (builder, "at_visual_bell_toggle");
+       
+       gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (button),
+                                     is_enabled);
+}
+
+
+static void
+at_visual_bell_changed (GConfClient *client,
+                        guint        cnxn_id,
+                        GConfEntry  *entry,
+                        gpointer     user_data)
+{
+       at_visual_bell_update (client, user_data); 
+}
+
+
+static void
+at_visual_bell_toggled (GtkToggleButton *toggle_button, 
+                        GtkBuilder      *builder)
+{
+       GConfClient *client = gconf_client_get_default ();
+       gboolean is_enabled = gtk_toggle_button_get_active (toggle_button);
+       
+       gconf_client_set_bool (client, VISUAL_BELL_KEY,
+                              is_enabled,
+                              NULL);
+       g_object_unref (client);
+}
+
 
 static void
 setup_dialog (GtkBuilder *builder)
@@ -279,6 +316,28 @@
         at_gksudo_changed,
         builder, NULL, NULL);
             
+
+    // Visual bell toggle
+    gconf_client_add_dir (client, VISUAL_BELL_KEY_DIR, 
+                          GCONF_CLIENT_PRELOAD_ONELEVEL, NULL);
+    
+    object = gtk_builder_get_object (builder, "at_visual_bell_toggle");
+        
+    g_signal_connect (object, "toggled",
+                      G_CALLBACK (at_visual_bell_toggled),   
+                      builder);
+
+    peditor = gconf_peditor_new_boolean (NULL, VISUAL_BELL_KEY,
+                                         GTK_WIDGET (object),
+                                         NULL);     
+        
+    at_visual_bell_update (client, builder);
+       
+    gconf_client_notify_add (client, VISUAL_BELL_KEY_DIR,
+        at_visual_bell_changed,
+        builder, NULL, NULL);
+
+
 	gconf_client_add_dir (client, ACCESSIBILITY_KEY_DIR,
 			      GCONF_CLIENT_PRELOAD_ONELEVEL, NULL);
 
