Index: gnome-control-center-2.91.92/configure
===================================================================
--- gnome-control-center-2.91.92.orig/configure	2011-03-21 20:56:26.608367002 +0100
+++ gnome-control-center-2.91.92/configure	2011-03-21 20:56:34.768367001 +0100
@@ -794,8 +794,6 @@
 CUPS_CONFIG
 BUILD_NETWORK_FALSE
 BUILD_NETWORK_TRUE
-NETWORK_MANAGER_LIBS
-NETWORK_MANAGER_CFLAGS
 GDESKTOP_PREFIX
 USER_ACCOUNTS_PANEL_LIBS
 USER_ACCOUNTS_PANEL_CFLAGS
@@ -1099,8 +1097,6 @@
 UNIVERSAL_ACCESS_PANEL_LIBS
 USER_ACCOUNTS_PANEL_CFLAGS
 USER_ACCOUNTS_PANEL_LIBS
-NETWORK_MANAGER_CFLAGS
-NETWORK_MANAGER_LIBS
 CHEESE_CFLAGS
 CHEESE_LIBS
 ISOCODES_CFLAGS
@@ -1875,10 +1871,6 @@
               C compiler flags for USER_ACCOUNTS_PANEL, overriding pkg-config
   USER_ACCOUNTS_PANEL_LIBS
               linker flags for USER_ACCOUNTS_PANEL, overriding pkg-config
-  NETWORK_MANAGER_CFLAGS
-              C compiler flags for NETWORK_MANAGER, overriding pkg-config
-  NETWORK_MANAGER_LIBS
-              linker flags for NETWORK_MANAGER, overriding pkg-config
   CHEESE_CFLAGS
               C compiler flags for CHEESE, overriding pkg-config
   CHEESE_LIBS linker flags for CHEESE, overriding pkg-config
@@ -5345,13 +5337,13 @@
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:5348: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:5340: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:5351: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:5343: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:5354: output\"" >&5)
+  (eval echo "\"\$as_me:5346: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
@@ -6556,7 +6548,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6559 "configure"' > conftest.$ac_ext
+  echo '#line 6551 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -7835,11 +7827,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7838: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7830: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7842: \$? = $ac_status" >&5
+   echo "$as_me:7834: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -8174,11 +8166,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8177: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8169: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:8181: \$? = $ac_status" >&5
+   echo "$as_me:8173: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -8279,11 +8271,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8282: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8274: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8286: \$? = $ac_status" >&5
+   echo "$as_me:8278: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -8334,11 +8326,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8337: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8329: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8341: \$? = $ac_status" >&5
+   echo "$as_me:8333: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -10718,7 +10710,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10721 "configure"
+#line 10713 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -10814,7 +10806,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10817 "configure"
+#line 10809 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -16542,80 +16534,7 @@
 GDESKTOP_PREFIX=`$PKG_CONFIG --variable prefix gsettings-desktop-schemas`
 
 
-# Check for NetworkManager ~0.9
-
-pkg_failed=no
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for NETWORK_MANAGER" >&5
-$as_echo_n "checking for NETWORK_MANAGER... " >&6; }
-
-if test -n "$NETWORK_MANAGER_CFLAGS"; then
-    pkg_cv_NETWORK_MANAGER_CFLAGS="$NETWORK_MANAGER_CFLAGS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnm-glib >= \$NETWORK_MANAGER_REQUIRED_VERSION\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_NETWORK_MANAGER_CFLAGS=`$PKG_CONFIG --cflags "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-if test -n "$NETWORK_MANAGER_LIBS"; then
-    pkg_cv_NETWORK_MANAGER_LIBS="$NETWORK_MANAGER_LIBS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnm-glib >= \$NETWORK_MANAGER_REQUIRED_VERSION\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_NETWORK_MANAGER_LIBS=`$PKG_CONFIG --libs "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-
-
-
-if test $pkg_failed = yes; then
-   	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-
-if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
-        _pkg_short_errors_supported=yes
-else
-        _pkg_short_errors_supported=no
-fi
-        if test $_pkg_short_errors_supported = yes; then
-	        NETWORK_MANAGER_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION" 2>&1`
-        else
-	        NETWORK_MANAGER_PKG_ERRORS=`$PKG_CONFIG --print-errors "libnm-glib >= $NETWORK_MANAGER_REQUIRED_VERSION" 2>&1`
-        fi
-	# Put the nasty error message in config.log where it belongs
-	echo "$NETWORK_MANAGER_PKG_ERRORS" >&5
-
-	have_networkmanager=no
-elif test $pkg_failed = untried; then
-     	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-	have_networkmanager=no
-else
-	NETWORK_MANAGER_CFLAGS=$pkg_cv_NETWORK_MANAGER_CFLAGS
-	NETWORK_MANAGER_LIBS=$pkg_cv_NETWORK_MANAGER_LIBS
-        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-	have_networkmanager=yes
-fi
-if test "x$have_networkmanager" = xno ; then
-        { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: *** Network panel will not be built (NetworkManager ~0.9 or newer not found) ***" >&5
-$as_echo "$as_me: WARNING: *** Network panel will not be built (NetworkManager ~0.9 or newer not found) ***" >&2;}
-fi
+have_networkmanager=yes
  if test x$have_networkmanager = xyes; then
   BUILD_NETWORK_TRUE=
   BUILD_NETWORK_FALSE='#'
Index: gnome-control-center-2.91.92/panels/network/Makefile.in
===================================================================
--- gnome-control-center-2.91.92.orig/panels/network/Makefile.in	2011-03-21 20:56:26.620367002 +0100
+++ gnome-control-center-2.91.92/panels/network/Makefile.in	2011-03-21 20:56:36.740367001 +0100
@@ -82,11 +82,8 @@
 LTLIBRARIES = $(ccpanels_LTLIBRARIES)
 am__DEPENDENCIES_1 =
 libnetwork_la_DEPENDENCIES = $(am__DEPENDENCIES_1) \
-	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
-am_libnetwork_la_OBJECTS = network-module.lo panel-common.lo \
-	net-object.lo net-device.lo net-vpn.lo \
-	panel-cell-renderer-mode.lo panel-cell-renderer-signal.lo \
-	cc-network-panel.lo
+	$(am__DEPENDENCIES_1)
+am_libnetwork_la_OBJECTS = network-module.lo cc-network-panel.lo
 libnetwork_la_OBJECTS = $(am_libnetwork_la_OBJECTS)
 AM_V_lt = $(am__v_lt_$(V))
 am__v_lt_ = $(am__v_lt_$(AM_DEFAULT_VERBOSITY))
@@ -231,8 +228,6 @@
 MSGFMT = @MSGFMT@
 MSGFMT_015 = @MSGFMT_015@
 MSGMERGE = @MSGMERGE@
-NETWORK_MANAGER_CFLAGS = @NETWORK_MANAGER_CFLAGS@
-NETWORK_MANAGER_LIBS = @NETWORK_MANAGER_LIBS@
 NETWORK_PANEL_CFLAGS = @NETWORK_PANEL_CFLAGS@
 NETWORK_PANEL_LIBS = @NETWORK_PANEL_LIBS@
 NM = @NM@
@@ -360,18 +355,6 @@
 ccpanels_LTLIBRARIES = libnetwork.la
 libnetwork_la_SOURCES = \
 	network-module.c				\
-	panel-common.c					\
-	panel-common.h					\
-	net-object.c					\
-	net-object.h					\
-	net-device.c					\
-	net-device.h					\
-	net-vpn.c					\
-	net-vpn.h					\
-	panel-cell-renderer-mode.c			\
-	panel-cell-renderer-mode.h			\
-	panel-cell-renderer-signal.c			\
-	panel-cell-renderer-signal.h			\
 	cc-network-panel.c				\
 	cc-network-panel.h
 
@@ -460,13 +443,7 @@
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/cc-network-panel.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/net-device.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/net-object.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/net-vpn.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/network-module.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/panel-cell-renderer-mode.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/panel-cell-renderer-signal.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/panel-common.Plo@am__quote@
 
 .c.o:
 @am__fastdepCC_TRUE@	$(AM_V_CC)$(COMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<
