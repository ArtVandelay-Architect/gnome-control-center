# Description: add aspect ratio estimates to resolution drop-down menu
# Upstream: http://bugzilla.gnome.org/show_bug.cgi?id=549642
#
diff -Nur -x '*.orig' -x '*~' gnome-control-center-2.27.5/capplets/display/xrandr-capplet.c gnome-control-center-2.27.5.new/capplets/display/xrandr-capplet.c
--- gnome-control-center-2.27.5/capplets/display/xrandr-capplet.c	2009-08-11 19:02:07.371216176 +0100
+++ gnome-control-center-2.27.5.new/capplets/display/xrandr-capplet.c	2009-08-11 19:02:09.523216033 +0100
@@ -606,7 +606,43 @@
 static char *
 make_resolution_string (int width, int height)
 {
-    return g_strdup_printf (_("%d x %d"), width, height);
+    int ratio;
+    const char *aspect = NULL;
+
+    if (width && height) {
+        if (width > height) ratio = width * 10 / height;
+        else ratio = height * 10 / width;
+
+        switch (ratio) {
+        case 13:
+            aspect = "4:3";
+            break;
+        case 16:
+            aspect = "16:10";
+            break;
+        case 17:
+            aspect = "16:9";
+            break;
+        case 12:
+            aspect = "5:4";
+            break;
+        // This catches 1.5625 as well (1600x1024) when maybe it shouldn't.
+        case 15:
+            aspect = "3:2";
+            break;
+        case 18:
+            aspect = "9:5";
+            break;
+        case 10:
+            aspect = "1:1";
+            break;
+        }
+    }
+
+    if (aspect)
+        return g_strdup_printf (_("%d x %d (%s)"), width, height, aspect);
+    else
+        return g_strdup_printf (_("%d x %d"), width, height);
 }
 
 static void
