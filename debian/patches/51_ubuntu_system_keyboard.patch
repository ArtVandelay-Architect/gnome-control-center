diff -Nur -x '*.orig' -x '*~' ubuntu/capplets/keyboard/gnome-keyboard-properties-xkb.c ubuntu.new/capplets/keyboard/gnome-keyboard-properties-xkb.c
--- ubuntu/capplets/keyboard/gnome-keyboard-properties-xkb.c	2008-09-10 11:42:21.000000000 +0200
+++ ubuntu.new/capplets/keyboard/gnome-keyboard-properties-xkb.c	2008-09-10 11:42:25.000000000 +0200
@@ -29,6 +29,7 @@
 #include <gdk/gdkx.h>
 #include <gconf/gconf-client.h>
 #include <glade/glade.h>
+#include <dbus/dbus-glib.h>
 
 #include "capplet-util.h"
 #include "gconf-property-editor.h"
@@ -122,6 +123,154 @@
 	xkb_gconf_client = NULL;
 }
 
+// mvo: make default entry the system wide default
+static void
+make_default (GtkWidget * button, GladeXML * dialog)
+{
+        GkbdKeyboardConfig kbd;
+	GError *error = NULL;
+	gboolean dbus_ret, res;
+	DBusGConnection *systembus, *sessionbus;
+	DBusGProxy *dbus_proxy;
+	int default_group;
+	gchar model[128] = {0,};
+	gchar layout[128] = {0,};
+	gchar variant[128] = {0,};
+	gchar options[256] = {0,};
+
+	// get current settings
+	gkbd_keyboard_config_init (&kbd, xkb_gconf_client, engine);
+	gkbd_keyboard_config_load_from_gconf (&kbd, &initial_config);
+	default_group = gconf_client_get_int(xkb_gconf_client, 
+					     "/desktop/gnome/peripherals/keyboard/general/defaultGroup",
+					     NULL);
+
+	// convert so that its apprioriate for the dbus backend
+	strncpy(model, kbd.model, sizeof(model));
+
+	// get default_group
+	gchar *ndata = (gchar*)g_list_nth_data((GSList*)kbd.layouts_variants, default_group);
+	// something is wrong with the gconf settings, ignore
+	if(ndata == NULL) {
+	   g_printerr("gconf default keyboard group out of range\n");
+	   return;
+	}
+	gchar** layout_variant = g_strsplit(ndata, "\t", -1);
+	strncpy(layout, layout_variant[0], sizeof(layout));
+	if(g_strv_length(layout_variant) > 1)
+	   strncpy(variant, layout_variant[1], sizeof(variant));
+	g_strfreev(layout_variant);
+
+	// build options string
+	GString *options_str = g_string_new("");
+	GSList *l = kbd.options;
+	if (l->data) {
+	   gchar** options_v = g_strsplit(l->data,"\t",-1);
+	   options_str = g_string_append(options_str, options_v[1]);
+	   g_strfreev(options_v);
+	}
+	while(l = g_list_next(l)) {
+	   options_str = g_string_append(options_str, ",");
+	   gchar** options_v = g_strsplit(l->data,"\t",-1);
+	   options_str = g_string_append(options_str, options_v[1]);
+	   g_strfreev(options_v);
+	}
+	strncpy(options, options_str->str, sizeof(options));
+	g_string_free(options_str, TRUE);
+	gkbd_keyboard_config_term (&kbd);
+
+	// the console does not deal very well with evdev, we let
+	// the auto detection handle this for now
+	if (strcmp(model,"evdev") == 0)
+	   strcpy(model,"");
+
+#if 0	
+	printf("model: %s\n", model);
+	printf("layout: '%s'\n", layout);
+	printf("variant: '%s'\n", variant);
+	printf("options: '%s'\n", options);
+#endif
+
+	// now do the dbus stuff
+	sessionbus = dbus_g_bus_get (DBUS_BUS_SESSION, &error);
+	if (sessionbus == NULL) {
+	   g_printerr ("Failed to open connection to bus: %s\n",
+		       error->message);
+	   g_error_free (error);
+	   return;
+	}
+
+	dbus_proxy = dbus_g_proxy_new_for_name (sessionbus,
+						"org.freedesktop.PolicyKit.AuthenticationAgent",
+						"/",
+						"org.freedesktop.PolicyKit.AuthenticationAgent");
+	if (dbus_proxy == NULL) {
+	   g_printerr ("Failed to get proxy: %s\n",
+                  error->message);
+	   g_error_free (error);
+	   return;
+	}
+
+	if (!dbus_g_proxy_call (dbus_proxy, "ObtainAuthorization", &error, 
+				G_TYPE_STRING, "com.ubuntu.systemservice.setkeyboard",			   
+				G_TYPE_UINT, 0,
+				G_TYPE_UINT, getpid(),
+				G_TYPE_INVALID,
+				G_TYPE_BOOLEAN, &res, G_TYPE_INVALID))
+	   {
+	      if (error->domain == DBUS_GERROR && 
+		  error->code == DBUS_GERROR_REMOTE_EXCEPTION)
+		 g_printerr ("Caught remote method exception %s: %s",
+			     dbus_g_error_get_name (error),
+			     error->message);
+	      else
+		 g_printerr ("Error: %s\n", error->message);
+	      g_error_free (error);
+	      return;
+	   }
+	g_object_unref (dbus_proxy);
+	g_print("ObtainAuth returned: %i\n", res);
+	// so we get a "0" here too if the auth is not required ?!?
+	//   if(!res)
+	//   return;
+   
+	systembus = dbus_g_bus_get (DBUS_BUS_SYSTEM, &error);
+	dbus_proxy = dbus_g_proxy_new_for_name (systembus,
+						"com.ubuntu.SystemService",
+						"/",
+						"com.ubuntu.SystemService");
+	if (dbus_proxy == NULL) {
+	   g_printerr ("Failed to get dbus proxy: %s\n",
+		       error->message);
+	   g_error_free (error);
+	   return;
+	}
+
+	dbus_ret = dbus_g_proxy_call (dbus_proxy, "set_keyboard", &error, 
+				      G_TYPE_STRING, model,
+				      G_TYPE_STRING, layout,
+				      G_TYPE_STRING, variant,
+				      G_TYPE_STRING, options,
+				      G_TYPE_INVALID,
+				      G_TYPE_BOOLEAN, &res, 
+				      G_TYPE_INVALID);
+	if (!dbus_ret) {
+	      if (error->domain == DBUS_GERROR && 
+		  error->code == DBUS_GERROR_REMOTE_EXCEPTION)
+		 g_printerr ("Caught remote method exception %s: %s",
+			     dbus_g_error_get_name (error),
+			     error->message);
+	      else
+		 g_printerr ("Error: %s\n", error->message);
+	      g_error_free (error);
+	      return;
+	}
+
+
+	//printf("res: %i\n", res);
+	g_object_unref (dbus_proxy);
+}
+
 static void
 reset_to_defaults (GtkWidget * button, GladeXML * dialog)
 {
@@ -182,6 +331,11 @@
 			  "clicked", G_CALLBACK (reset_to_defaults),
 			  dialog);
 
+	// mvo: global keyboard setting
+	g_signal_connect (G_OBJECT (WID ("button_make_default")),
+			  "clicked", G_CALLBACK (make_default),
+			  dialog);
+
 	g_signal_connect_swapped (G_OBJECT (WID ("xkb_layout_options")),
 				  "clicked",
 				  G_CALLBACK (xkb_options_popup_dialog),
diff -Nur -x '*.orig' -x '*~' ubuntu/capplets/keyboard/gnome-keyboard-properties.glade ubuntu.new/capplets/keyboard/gnome-keyboard-properties.glade
--- ubuntu/capplets/keyboard/gnome-keyboard-properties.glade	2008-09-10 11:42:21.000000000 +0200
+++ ubuntu.new/capplets/keyboard/gnome-keyboard-properties.glade	2008-09-10 11:42:50.000000000 +0200
@@ -366,7 +366,7 @@
                   </widget>
                 </child>
                 <child>
-                  <widget class="GtkLabel" id="label1">
+                  <widget class="GtkLabel" id="label2">
                     <property name="visible">True</property>
                     <property name="label" translatable="yes">General</property>
                     <property name="justify">GTK_JUSTIFY_CENTER</property>
@@ -462,19 +462,7 @@
                           </widget>
                         </child>
                         <child>
-                          <widget class="GtkCheckButton" id="chk_separate_group_per_window">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="label" translatable="yes">Separate _layout for each window</property>
-                            <property name="use_underline">True</property>
-                            <property name="response_id">0</property>
-                            <property name="draw_indicator">True</property>
-                          </widget>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
+                          <placeholder/>
                         </child>
                         <child>
                           <widget class="GtkHBox" id="hbox2">
@@ -501,25 +489,24 @@
                                   </packing>
                                 </child>
                                 <child>
-                                  <widget class="GtkButton" id="xkb_layouts_print">
+                                  <widget class="GtkButton" id="xkb_layouts_add">
                                     <property name="visible">True</property>
                                     <property name="can_focus">True</property>
-                                    <property name="label">gtk-print</property>
-                                    <property name="use_stock">True</property>
+                                    <property name="label" translatable="yes">_Add...</property>
                                     <property name="response_id">0</property>
                                   </widget>
                                   <packing>
                                     <property name="expand">False</property>
                                     <property name="fill">False</property>
-                                    <property name="position">2</property>
+                                    <property name="position">1</property>
                                   </packing>
                                 </child>
                                 <child>
-                                  <widget class="GtkButton" id="xkb_layouts_add">
+                                  <widget class="GtkButton" id="xkb_layouts_print">
                                     <property name="visible">True</property>
                                     <property name="can_focus">True</property>
-                                    <property name="label" translatable="yes">_Add...</property>
-                                    <property name="use_underline">True</property>
+                                    <property name="label">gtk-print</property>
+                                    <property name="use_stock">True</property>
                                     <property name="response_id">0</property>
                                   </widget>
                                   <packing>
@@ -534,51 +521,99 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkButton" id="xkb_reset_to_defaults">
+                              <placeholder/>
+                            </child>
+                          </widget>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="position">2</property>
+                          </packing>
+                        </child>
+                      </widget>
+                      <packing>
+                        <property name="position">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <widget class="GtkHBox" id="hbox3">
+                        <property name="visible">True</property>
+                        <child>
+                          <widget class="GtkCheckButton" id="chk_separate_group_per_window">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="label" translatable="yes">Separate _layout for each window</property>
+                            <property name="use_underline">True</property>
+                            <property name="response_id">0</property>
+                            <property name="draw_indicator">True</property>
+                          </widget>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <widget class="GtkHButtonBox" id="hbuttonbox3">
+                            <property name="visible">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="layout_style">GTK_BUTTONBOX_END</property>
+                            <child>
+                              <widget class="GtkButton" id="xkb_layout_options">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="label" translatable="yes">Reset to De_faults</property>
+                                <property name="receives_default">True</property>
+                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                                <property name="label" translatable="yes">Layout _Options...</property>
                                 <property name="use_underline">True</property>
                                 <property name="response_id">0</property>
                               </widget>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">GTK_PACK_END</property>
-                                <property name="position">4</property>
-                              </packing>
                             </child>
                           </widget>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="position">2</property>
+                            <property name="pack_type">GTK_PACK_END</property>
+                            <property name="position">1</property>
                           </packing>
                         </child>
                       </widget>
                       <packing>
-                        <property name="position">1</property>
+                        <property name="expand">False</property>
+                        <property name="position">2</property>
                       </packing>
                     </child>
                     <child>
-                      <widget class="GtkHButtonBox" id="hbuttonbox3">
+                      <widget class="GtkHBox" id="hbox4">
                         <property name="visible">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="layout_style">GTK_BUTTONBOX_END</property>
+                        <property name="spacing">12</property>
                         <child>
-                          <widget class="GtkButton" id="xkb_layout_options">
+                          <widget class="GtkButton" id="button_make_default">
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
                             <property name="receives_default">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="label" translatable="yes">Layout _Options...</property>
+                            <property name="label" translatable="yes">Apply System-Wide...</property>
+                            <property name="response_id">0</property>
+                          </widget>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <widget class="GtkButton" id="xkb_reset_to_defaults">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="label" translatable="yes">Reset to De_faults</property>
                             <property name="use_underline">True</property>
                             <property name="response_id">0</property>
                           </widget>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">1</property>
+                          </packing>
                         </child>
                       </widget>
                       <packing>
                         <property name="expand">False</property>
-                        <property name="position">2</property>
+                        <property name="position">3</property>
                       </packing>
                     </child>
                   </widget>
@@ -1076,100 +1111,84 @@
                                     <property name="column_spacing">12</property>
                                     <property name="row_spacing">6</property>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_long_label">
+                                      <widget class="GtkLabel" id="mousekeys_slow_label2">
                                         <property name="visible">True</property>
-                                        <property name="xalign">0</property>
-                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Long&lt;/i&gt;&lt;/small&gt;</property>
+                                        <property name="xalign">1</property>
+                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Slow&lt;/i&gt;&lt;/small&gt;</property>
                                         <property name="use_markup">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
                                       </widget>
                                       <packing>
-                                        <property name="left_attach">3</property>
-                                        <property name="right_attach">4</property>
-                                        <property name="top_attach">2</property>
-                                        <property name="bottom_attach">3</property>
+                                        <property name="left_attach">1</property>
+                                        <property name="right_attach">2</property>
+                                        <property name="top_attach">1</property>
+                                        <property name="bottom_attach">2</property>
                                         <property name="x_options">GTK_FILL</property>
                                         <property name="y_options"></property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkHScale" id="mousekeys_init_delay_slide">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
-                                        <property name="adjustment">300 10 2000 10 10 0</property>
-                                        <property name="digits">0</property>
-                                        <property name="draw_value">False</property>
-                                      </widget>
-                                      <packing>
-                                        <property name="left_attach">2</property>
-                                        <property name="right_attach">3</property>
-                                        <property name="top_attach">2</property>
-                                        <property name="bottom_attach">3</property>
-                                        <property name="y_options">GTK_FILL</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <widget class="GtkLabel" id="mousekeys_short_label">
+                                      <widget class="GtkLabel" id="mousekeys_slow_label">
                                         <property name="visible">True</property>
                                         <property name="xalign">1</property>
-                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Short&lt;/i&gt;&lt;/small&gt;</property>
+                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Slow&lt;/i&gt;&lt;/small&gt;</property>
                                         <property name="use_markup">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
                                       </widget>
                                       <packing>
                                         <property name="left_attach">1</property>
                                         <property name="right_attach">2</property>
-                                        <property name="top_attach">2</property>
-                                        <property name="bottom_attach">3</property>
                                         <property name="x_options">GTK_FILL</property>
                                         <property name="y_options"></property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_delay_label">
+                                      <widget class="GtkHScale" id="mousekeys_accel_time_slide">
                                         <property name="visible">True</property>
-                                        <property name="xalign">0</property>
-                                        <property name="label" translatable="yes">_Delay:</property>
-                                        <property name="use_underline">True</property>
-                                        <property name="justify">GTK_JUSTIFY_CENTER</property>
-                                        <property name="mnemonic_widget">mousekeys_init_delay_slide</property>
+                                        <property name="can_focus">True</property>
+                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
+                                        <property name="adjustment">1800 0 3000 10 10 0</property>
+                                        <property name="draw_value">False</property>
+                                        <property name="value_pos">GTK_POS_RIGHT</property>
                                       </widget>
                                       <packing>
-                                        <property name="top_attach">2</property>
-                                        <property name="bottom_attach">3</property>
-                                        <property name="x_options">GTK_FILL</property>
+                                        <property name="left_attach">2</property>
+                                        <property name="right_attach">3</property>
                                         <property name="y_options">GTK_FILL</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_acceleration_label">
+                                      <widget class="GtkHScale" id="mousekeys_max_speed_slide">
                                         <property name="visible">True</property>
-                                        <property name="xalign">0</property>
-                                        <property name="label" translatable="yes">A_cceleration:</property>
-                                        <property name="use_underline">True</property>
-                                        <property name="justify">GTK_JUSTIFY_CENTER</property>
-                                        <property name="mnemonic_widget">mousekeys_accel_time_slide</property>
+                                        <property name="can_focus">True</property>
+                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
+                                        <property name="adjustment">300 10 1000 10 10 0</property>
+                                        <property name="digits">0</property>
+                                        <property name="draw_value">False</property>
                                       </widget>
                                       <packing>
-                                        <property name="x_options">GTK_FILL</property>
+                                        <property name="left_attach">2</property>
+                                        <property name="right_attach">3</property>
+                                        <property name="top_attach">1</property>
+                                        <property name="bottom_attach">2</property>
                                         <property name="y_options">GTK_FILL</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_speed_label">
+                                      <widget class="GtkLabel" id="mousekeys_fast_label2">
                                         <property name="visible">True</property>
                                         <property name="xalign">0</property>
-                                        <property name="label" translatable="yes">_Speed:</property>
-                                        <property name="use_underline">True</property>
+                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Fast&lt;/i&gt;&lt;/small&gt;</property>
+                                        <property name="use_markup">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
-                                        <property name="mnemonic_widget">mousekeys_max_speed_slide</property>
                                       </widget>
                                       <packing>
+                                        <property name="left_attach">3</property>
+                                        <property name="right_attach">4</property>
                                         <property name="top_attach">1</property>
                                         <property name="bottom_attach">2</property>
                                         <property name="x_options">GTK_FILL</property>
-                                        <property name="y_options">GTK_FILL</property>
+                                        <property name="y_options"></property>
                                       </packing>
                                     </child>
                                     <child>
@@ -1188,82 +1207,98 @@
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_fast_label2">
+                                      <widget class="GtkLabel" id="mousekeys_speed_label">
                                         <property name="visible">True</property>
                                         <property name="xalign">0</property>
-                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Fast&lt;/i&gt;&lt;/small&gt;</property>
-                                        <property name="use_markup">True</property>
+                                        <property name="label" translatable="yes">_Speed:</property>
+                                        <property name="use_underline">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
+                                        <property name="mnemonic_widget">mousekeys_max_speed_slide</property>
                                       </widget>
                                       <packing>
-                                        <property name="left_attach">3</property>
-                                        <property name="right_attach">4</property>
                                         <property name="top_attach">1</property>
                                         <property name="bottom_attach">2</property>
                                         <property name="x_options">GTK_FILL</property>
-                                        <property name="y_options"></property>
+                                        <property name="y_options">GTK_FILL</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkHScale" id="mousekeys_max_speed_slide">
+                                      <widget class="GtkLabel" id="mousekeys_acceleration_label">
                                         <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
-                                        <property name="adjustment">300 10 1000 10 10 0</property>
-                                        <property name="digits">0</property>
-                                        <property name="draw_value">False</property>
+                                        <property name="xalign">0</property>
+                                        <property name="label" translatable="yes">A_cceleration:</property>
+                                        <property name="use_underline">True</property>
+                                        <property name="justify">GTK_JUSTIFY_CENTER</property>
+                                        <property name="mnemonic_widget">mousekeys_accel_time_slide</property>
                                       </widget>
                                       <packing>
-                                        <property name="left_attach">2</property>
-                                        <property name="right_attach">3</property>
-                                        <property name="top_attach">1</property>
-                                        <property name="bottom_attach">2</property>
+                                        <property name="x_options">GTK_FILL</property>
                                         <property name="y_options">GTK_FILL</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkHScale" id="mousekeys_accel_time_slide">
+                                      <widget class="GtkLabel" id="mousekeys_delay_label">
                                         <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
-                                        <property name="adjustment">1800 0 3000 10 10 0</property>
-                                        <property name="draw_value">False</property>
-                                        <property name="value_pos">GTK_POS_RIGHT</property>
+                                        <property name="xalign">0</property>
+                                        <property name="label" translatable="yes">_Delay:</property>
+                                        <property name="use_underline">True</property>
+                                        <property name="justify">GTK_JUSTIFY_CENTER</property>
+                                        <property name="mnemonic_widget">mousekeys_init_delay_slide</property>
                                       </widget>
                                       <packing>
-                                        <property name="left_attach">2</property>
-                                        <property name="right_attach">3</property>
+                                        <property name="top_attach">2</property>
+                                        <property name="bottom_attach">3</property>
+                                        <property name="x_options">GTK_FILL</property>
                                         <property name="y_options">GTK_FILL</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_slow_label">
+                                      <widget class="GtkLabel" id="mousekeys_short_label">
                                         <property name="visible">True</property>
                                         <property name="xalign">1</property>
-                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Slow&lt;/i&gt;&lt;/small&gt;</property>
+                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Short&lt;/i&gt;&lt;/small&gt;</property>
                                         <property name="use_markup">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
                                       </widget>
                                       <packing>
                                         <property name="left_attach">1</property>
                                         <property name="right_attach">2</property>
+                                        <property name="top_attach">2</property>
+                                        <property name="bottom_attach">3</property>
                                         <property name="x_options">GTK_FILL</property>
                                         <property name="y_options"></property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <widget class="GtkLabel" id="mousekeys_slow_label2">
+                                      <widget class="GtkHScale" id="mousekeys_init_delay_slide">
                                         <property name="visible">True</property>
-                                        <property name="xalign">1</property>
-                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Slow&lt;/i&gt;&lt;/small&gt;</property>
+                                        <property name="can_focus">True</property>
+                                        <property name="update_policy">GTK_UPDATE_DISCONTINUOUS</property>
+                                        <property name="adjustment">300 10 2000 10 10 0</property>
+                                        <property name="digits">0</property>
+                                        <property name="draw_value">False</property>
+                                      </widget>
+                                      <packing>
+                                        <property name="left_attach">2</property>
+                                        <property name="right_attach">3</property>
+                                        <property name="top_attach">2</property>
+                                        <property name="bottom_attach">3</property>
+                                        <property name="y_options">GTK_FILL</property>
+                                      </packing>
+                                    </child>
+                                    <child>
+                                      <widget class="GtkLabel" id="mousekeys_long_label">
+                                        <property name="visible">True</property>
+                                        <property name="xalign">0</property>
+                                        <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;Long&lt;/i&gt;&lt;/small&gt;</property>
                                         <property name="use_markup">True</property>
                                         <property name="justify">GTK_JUSTIFY_CENTER</property>
                                       </widget>
                                       <packing>
-                                        <property name="left_attach">1</property>
-                                        <property name="right_attach">2</property>
-                                        <property name="top_attach">1</property>
-                                        <property name="bottom_attach">2</property>
+                                        <property name="left_attach">3</property>
+                                        <property name="right_attach">4</property>
+                                        <property name="top_attach">2</property>
+                                        <property name="bottom_attach">3</property>
                                         <property name="x_options">GTK_FILL</property>
                                         <property name="y_options"></property>
                                       </packing>
@@ -1732,53 +1767,53 @@
                         <property name="column_spacing">12</property>
                         <property name="row_spacing">6</property>
                         <child>
-                          <widget class="GtkLabel" id="label3">
+                          <widget class="GtkComboBox" id="xkb_country_variants_available">
                             <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">_Country:</property>
-                            <property name="use_underline">True</property>
-                            <property name="mnemonic_widget">xkb_countries_available</property>
                           </widget>
                           <packing>
+                            <property name="left_attach">1</property>
+                            <property name="right_attach">2</property>
+                            <property name="top_attach">1</property>
+                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkLabel" id="label4">
+                          <widget class="GtkComboBox" id="xkb_countries_available">
                             <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">_Variants:</property>
-                            <property name="use_underline">True</property>
-                            <property name="mnemonic_widget">xkb_country_variants_available</property>
                           </widget>
                           <packing>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
+                            <property name="left_attach">1</property>
+                            <property name="right_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkComboBox" id="xkb_countries_available">
+                          <widget class="GtkLabel" id="label4">
                             <property name="visible">True</property>
+                            <property name="xalign">0</property>
+                            <property name="label" translatable="yes">_Variants:</property>
+                            <property name="use_underline">True</property>
+                            <property name="mnemonic_widget">xkb_country_variants_available</property>
                           </widget>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
+                            <property name="top_attach">1</property>
+                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkComboBox" id="xkb_country_variants_available">
+                          <widget class="GtkLabel" id="label3">
                             <property name="visible">True</property>
+                            <property name="xalign">0</property>
+                            <property name="label" translatable="yes">_Country:</property>
+                            <property name="use_underline">True</property>
+                            <property name="mnemonic_widget">xkb_countries_available</property>
                           </widget>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
@@ -1813,53 +1848,53 @@
                         <property name="column_spacing">12</property>
                         <property name="row_spacing">6</property>
                         <child>
-                          <widget class="GtkLabel" id="label12">
+                          <widget class="GtkComboBox" id="xkb_language_variants_available">
                             <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">_Language:</property>
-                            <property name="use_underline">True</property>
-                            <property name="mnemonic_widget">xkb_countries_available</property>
                           </widget>
                           <packing>
+                            <property name="left_attach">1</property>
+                            <property name="right_attach">2</property>
+                            <property name="top_attach">1</property>
+                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkLabel" id="label13">
+                          <widget class="GtkComboBox" id="xkb_languages_available">
                             <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">_Variants:</property>
-                            <property name="use_underline">True</property>
-                            <property name="mnemonic_widget">xkb_country_variants_available</property>
                           </widget>
                           <packing>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
+                            <property name="left_attach">1</property>
+                            <property name="right_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkComboBox" id="xkb_languages_available">
+                          <widget class="GtkLabel" id="label13">
                             <property name="visible">True</property>
+                            <property name="xalign">0</property>
+                            <property name="label" translatable="yes">_Variants:</property>
+                            <property name="use_underline">True</property>
+                            <property name="mnemonic_widget">xkb_country_variants_available</property>
                           </widget>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
+                            <property name="top_attach">1</property>
+                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkComboBox" id="xkb_language_variants_available">
+                          <widget class="GtkLabel" id="label12">
                             <property name="visible">True</property>
+                            <property name="xalign">0</property>
+                            <property name="label" translatable="yes">_Language:</property>
+                            <property name="use_underline">True</property>
+                            <property name="mnemonic_widget">xkb_countries_available</property>
                           </widget>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
                             <property name="x_options">GTK_FILL</property>
                             <property name="y_options"></property>
                           </packing>
@@ -1898,7 +1933,7 @@
                     <property name="visible">True</property>
                     <property name="spacing">6</property>
                     <child>
-                      <widget class="GtkLabel" id="label2">
+                      <widget class="GtkLabel" id="label10">
                         <property name="visible">True</property>
                         <property name="xalign">0</property>
                         <property name="label" translatable="yes">Preview:</property>
@@ -1968,7 +2003,7 @@
               </packing>
             </child>
             <child>
-              <widget class="GtkButton" id="btnOk">
+              <widget class="GtkButton" id="btnOk1">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="can_default">True</property>
