#!/usr/bin/make -f
# -*- mode: makefile; coding: utf-8 -*-
#

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/rules/simple-patchsys.mk
include /usr/share/cdbs/1/rules/utils.mk
include /usr/share/cdbs/1/class/gnome.mk
include /usr/share/gnome-pkg-tools/1/rules/uploaders.mk
include /usr/share/gnome-pkg-tools/1/rules/gnome-version.mk
include /usr/share/gnome-pkg-tools/1/rules/clean-la.mk

DEB_BUILDDIR = $(CURDIR)/debian/build
DEB_CONFIGURE_SCRIPT_ENV += LDFLAGS="-Wl,-O1 -Wl,--as-needed"
DEB_CONFIGURE_EXTRA_FLAGS += --disable-mime-cache \
                             --disable-scrollkeeper \
                             --enable-aboutme \
                             --enable-gstreamer=0.10

DEB_CONFIGURE_LOCALSTATEDIR := /var/lib

DEB_INSTALL_MANPAGES_gnome-control-center += debian/gnome-control-center.1

build/gnome-control-center:: $(DEB_INSTALL_MANPAGES_gnome-control-center)

%.1: %.sgml
	/usr/bin/docbook-to-man $< > $@

binary-post-install/capplets-data::
	rm -rf debian/capplets-data/usr/share/applications/mimeinfo.cache

clean::
	rm -f $(DEB_INSTALL_MANPAGES_gnome-control-center)
	rm -rf $(DEB_BUILDDIR)
